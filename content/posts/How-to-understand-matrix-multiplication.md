---
title: "How to understand matrix multiplication"
date: 2020-07-19T19:34:05+08:00
categories: ["linear algebra"]
tags: ["linear algebra"]
draft: false
---

如何理解矩阵？这是线性代数的一个比较关键而本质的问题，对其是否正确形象的理解关系到线性代数学习和应用的全局，本文将解释矩阵其实对应着空间变换，其本质是映射或运动.

### **从映射到矩阵乘法**

考虑什么是映射？对于某个函数$f(x)$，任意一个定义在其定义域内的输入都有一个唯一的输出与之对应，这便是映射.比如，对于如下多项式函数

\begin{equation}f(x) = 4x^3 + 3x^2 + 2x + 1\end{equation}

对于任意一个$x$，其满足$x∈R$，都有一个唯一的$f(x)$与之唯一对应.即函数$f(x)$将$x$映射到了$4x^3 + 3x^2 + 2x + 1$上.很明显，这是从数到数的映射.但是放在空间的角度看，该函数的本质是定义了一个从向量$[x, f(x)]$到向量$[x, f(x)]$的映射.如何理解？

我们考虑如何将该函数定义的一点$(x, f(x))$表示在图像上.首先我们有一个自变量$x$，它其实刻画了空间内线性无关的一个向量的伸缩尺寸；然后将$x$带入函数中，我们便会得到一个$f(x)$，这是另外一个线性无关的向量的伸缩尺寸.这里有两个线性无关的伸缩尺寸，那么必然存在两个线性无关的基，所以该函数定义的点表示在二维空间中.可以张成二维空间的基有若干个，我们必须选定一个基，不妨选择标准正交基$[1, 0]^T,[0, 1]^T$，将该函数定义的$(x, f(x))$表示在空间中的方法是

\begin{equation}
x\begin{bmatrix}1 \newline 0 \end{bmatrix} + f(x)\begin{bmatrix}0 \newline 1\end{bmatrix} = 
\begin{bmatrix}1 & 0 \newline 0 & 1\end{bmatrix}
\begin{bmatrix}x \newline f(x)\end{bmatrix} = 
\begin{bmatrix}x \newline f(x)\end{bmatrix}
\end{equation}

很明显，在空间角度看，其本质就是从向量$[x, f(x)]$到向量$[x, f(x)]$的映射.关于该函数的本质已经解释清楚了，那么如何理解这个空间当中的映射呢？首先将上式中的矩阵定义为$\pmb{A}$，与矩阵相乘的向量定义为$\pmb{x}$，结果向量表示为$\pmb{y}$，即

\begin{equation}\pmb{A} = 
\begin{bmatrix}1 & 0 \newline 0 & 1\end{bmatrix},\pmb{x} = 
\begin{bmatrix}x \newline f(x) \end{bmatrix},\pmb{y} = 
\begin{bmatrix}x \newline f(x) \end{bmatrix}
\end{equation}

那么便有

\begin{equation}\pmb{Ax} = \pmb{y}\end{equation}

有了上述标准化定义，那么就可以如下理解这个空间映射.

在$n$维单位矩阵中线性表示的$n$维向量$\pmb{Ex}$经矩阵$\pmb{A}$映射，将其变换到$n$维单位矩阵中线性表示的$n$维向量$\pmb{EAX}$，即$\pmb{y}$.

也就是说上式其实是这个样子的

\begin{equation}\pmb{EAEx} = \pmb{y}\end{equation}

即，将在单位矩阵中线性表示的结果$\pmb{Ex}$作为矩阵$\pmb{A}$的输入，然后将其映射后的结果$\pmb{AEx}$组合在单位阵中，便实现了单位阵中向量$\pmb{x}$到向量$\pmb{y}$的映射.

### **逆映射与逆矩阵**

所谓逆映射，就是我们熟悉的反函数。对于在定义域上严格单调的函数，必有反函数. 如果不严格单调呢？例如对于如下函数

\begin{equation}f(x) = x^2\end{equation}

其定义域为$R$，值域为$[0, +∞)$.在定义域$R$上，该函数是不存在反函数的，因为对于除$f(0) = 0$之外的任何一个$f(x)$到$x$的映射均非单射.比如，$f(5) = f(-5) = 25$，如果将$25$反向映射回去。它会面临两个可能的取值，这是存在歧义的，故函数$f(x)$在$R$上无反函数.

如果我们限定其定义域为$(0, +∞)$，那么函数$f(x)$则会存在反函数，此时便是单射.逆矩阵与此也是相同的道理.

我们知道，矩阵对应一次映射，它将一个$\pmb{E}$中的向量映射到$\pmb{E}$中的另一个位置，那么能够将映射后的向量再映射回去的矩阵为该矩阵对应的逆矩阵，记为$\pmb{A}^{-1}$.

并不是所有的矩阵都存在逆矩阵，矩阵是否存在逆矩阵必须满足两个条件，缺一不可

1. 矩阵$\pmb{A}$必须为方阵；
2. 矩阵$\pmb{A}$的行列式不为零，即$\left|\pmb{A}\right| \neq 0$.

我们一一解释，首先，为什么矩阵必须是方阵才有可能存在逆矩阵呢？

回忆$m$个方程$n$个未知量的非齐次线性方程组（或齐次线性方程组，都是一样的道理），该方程只有在$R(\pmb{A}) = R(\pmb{A, b}) = n$时才存在唯一解，实际上此时必然满足$R(\pmb{A}) = R(\pmb{A, b}) = n = m$.这是因为$R(\pmb{A}) = n$，因为$R(\pmb{A})$等于$\pmb{A}$中非零子式或者说初等变换后非零行的行数，行数是$m$，而该行数等于$n$，所以$m = n$.当方程组存在唯一解的情况下，便是从$\pmb{y}$到$\pmb{x}$的单射，不会存在歧义，因此该矩阵可逆.

若方程组满足$R(\pmb{A}) = R(\pmb{A, b}) < n$，那么该方程存在无穷多解，意味着对于每一个$\pmb{y}$都有无数个$\pmb{x}$与之对应，这是很大的歧义，矩阵必然不可逆，因为逆矩阵不知道将$\pmb{y}$映射回哪个$\pmb{x}$.

综上，矩阵可逆的必要条件就是该矩阵必须为方阵，即$m = n$.

若矩阵不是方阵，则必然不可逆；若矩阵是方阵，则可能不可逆.为什么这么说呢？便是对第二点的解释.

考虑如下矩阵$\pmb{A}$，其行列式为零，即

\begin{equation}\pmb{A} = 
\begin{bmatrix}1 & 1 \newline 2 & 2\end{bmatrix},\ \ \ \left|\pmb{A}\right| = 
\begin{vmatrix}1 & 1 \newline 2 & 2\end{vmatrix} = 1 \times 2 - 1 \times 2 = 0
\end{equation}

该矩阵对应的基为$[1, 2]^T, [1, 2]^T$，可以看到是重复的.组成该矩阵的基其实无法张成二维空间，只能张成一维空间，对于任意向量的表示也只是在一维空间内（它所能对向量施加的运算仅仅是数乘，即使是向量加法，本质也是数乘），这意味着对于输入$\pmb{x}$，有一个维度的信息被模糊掉了.这是它的空间意义，如果仅从代数的角度看，我们依然求该向量能否唯一的线性表示向量$\pmb{y}$.即下式的解是否唯一

\begin{equation}
\begin{bmatrix}1 & 1 \newline 2 & 2\end{bmatrix}\pmb{x} = \pmb{y}
\end{equation}

若矩阵$\pmb{A}$可以唯一的线性表示$\pmb{y}$，那么必然满足$R(\pmb{A}) = R(\pmb{A, y}) = n$，更进一步地，必然满足$R(\pmb{A}) = R(\pmb{A, y}) = n = m$.显然，该矩阵必然不满足有唯一解的条件，即有无穷多解或无解，这样的话，矩阵是不可逆的.也就是说，即使是方阵，也有可能经过初等变换后变成非方阵，即奇异矩阵.

对于判断矩阵是否可逆的两个条件，本质上就是看线性方程组的解是否唯一.如果解唯一，说明经逆矩阵变换后的向量$\pmb{y}$，仅有一个唯一的$\pmb{x}$与之对应，反之则不是.

站在空间的角度看，矩阵$\pmb{A}$的本质是对单位阵张成的空间进行的伸缩变换，而矩阵$\pmb{A}$的行列式$\left|\pmb{A}\right|$其实就是矩阵基构成的多面体的体积.若矩阵各基独立不相关，即不存在重复的基（重复的基对空间的张成没有任何贡献，反而能被空间表示），那么它构成的多面体的体积必然不为零；若存在重复的基或者说线性相关的基，那么多面体的体积必然为零.若矩阵中有一个矩阵能被线性表示，那么意味着矩阵的维数将会比向量$\pmb{x}$的维数少1个，那么映射之后会有一个维度的信息被丢失，所以无法通过逆矩阵还原，即不可逆.

其实，代数角度上的逆矩阵比空间意义上的逆矩阵更容易理解.还有一个矩阵，请读者判断其是否可逆，如下

\begin{equation}
\begin{bmatrix}1 & 2 & 3 \newline 4 & 5 & 6 \newline 7 & 8 & 9 \end{bmatrix}
\end{equation}

本文完